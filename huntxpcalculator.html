<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XP Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .section { margin-bottom: 20px; }
        .item { display: flex; align-items: center; margin-bottom: 5px; }
        .item input[type="number"] { width: 50px; text-align: center; }
        .total { font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="total">Total XP: <span id="totalXP">0</span></div>

    <div class="section">
        <h3>World</h3>
        <div class="item"><input type="checkbox" data-xp="200"> Clue Pickup (200 XP)</div>
        <div class="item"><input type="checkbox" data-xp="100"> Lair Discovered (100 XP)</div>
        <div class="item"><input type="checkbox" data-xp="400"> Boss 1 Kill (400 XP)</div>
        <div class="item"><input type="checkbox" data-xp="400"> Boss 2 Kill (400 XP)</div>
        <div class="item"><input type="checkbox" data-xp="350"> Boss 1 Banish (350 XP)</div>
        <div class="item"><input type="checkbox" data-xp="350"> Boss 2 Banish (350 XP)</div>
        <div class="item"><input type="checkbox" data-xp="100"> Clean Sweep (100 XP)</div>
        <div class="item">
            Extraction Time: <input type="text" id="extractionTime" placeholder="MM:SS" oninput="updateTotal()">
        </div>
    </div>

    <div class="section">
        <h3>Creatures</h3>
        <script>
            const creatures = {
                "Leech": 10, "Grunt": 20, "Hellhound": 40, "Waterdevil": 20,
                "Hive": 60, "Immolator": 60, "Armoured": 60, "Meathead": 300,
                "Revive Partner": 100, "Kill Teammate": -500, "Kill Hunter": 450
            };
        </script>
        <div id="creatures"></div>
    </div>

    <script>
        function updateTotal() {
            let totalXP = 0;
            document.querySelectorAll("input[type='checkbox']").forEach(cb => {
                if (cb.checked) totalXP += parseInt(cb.getAttribute("data-xp"));
            });
            document.querySelectorAll("input[type='number']").forEach(input => {
                totalXP += parseInt(input.value) * parseInt(input.getAttribute("data-xp"));
            });
            let extraction = document.getElementById("extractionTime").value;
            let minutes = extraction.match(/^\d+(:\d{2})?$/) ? parseInt(extraction.split(":")[0]) || 0 : 0;
            totalXP += minutes * 4;
            document.getElementById("totalXP").textContent = Math.max(0, totalXP);
        }

        document.querySelectorAll("input[type='checkbox']").forEach(cb => {
            cb.addEventListener("change", updateTotal);
        });
        
        let creatureContainer = document.getElementById("creatures");
        for (let [name, xp] of Object.entries(creatures)) {
            let div = document.createElement("div");
            div.className = "item";
            div.innerHTML = 
                <button onclick="adjustCount(this, -1)" disabled>-</button>
                <input type="number" value="0" min="0" data-xp="${xp}" onchange="updateTotal()">
                <button onclick="adjustCount(this, 1)">+</button>
                ${name} (${xp} XP)
            ;
            creatureContainer.appendChild(div);
        }

        function adjustCount(button, change) {
            let input = button.parentElement.querySelector("input");
            let newValue = Math.max(0, parseInt(input.value) + change);
            input.value = newValue;
            button.parentElement.querySelector("button:first-child").disabled = newValue === 0;
            updateTotal();
        }
    </script>
</body>
</html>